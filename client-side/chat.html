<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css"
    />
    <link rel="stylesheet" href="css/bootstrap.min.css.map" />
    <link rel="stylesheet" href="css/bootstrap.min.css" />
    <link rel="stylesheet" href="css/owl.theme.default.min.css" />
    <link rel="stylesheet" href="css/owl.carousel.min.css" />
    <link rel="stylesheet" href="css/select2.css" />
    <link rel="stylesheet" href="css/jquery.fancybox.min.css" />
    <link rel="stylesheet" href="css/style.css" />
    <!-- <link rel="stylesheet" href="css/rtl-style.css" /> -->
    <title>Rework Website</title>
  </head>

  <body style="background-color: #fff">
    <div class="nav-layer"></div>

    <!--start loader-->
    <div class="loader">
      <div class="logo-co-p">
        <img src="imgs/logo.png" alt="image" />
      </div>
      <div class="main-loader-main">
        <div class="spinner-square">
          <div class="square-1 square"></div>
          <div class="square-2 square"></div>
          <div class="square-3 square"></div>
        </div>
      </div>
    </div>
    <!--End loader-->
    <!--start header-->
    <header class="header shadow-header">
      <div class="container h-100">
        <a href="index.html" class="logo"
          ><img src="imgs/logo.png" alt="img"
        /></a>
        <!--show if user is not logged-->
        <!-- <ul class="links">
            <div class="flex-group-me mid-screen">
              <img src="imgs/logo.png" class="logo mid-screen" alt="" />
            </div>
            <li><a href="index.html">الرئيسية</a></li>
            <li><a href="#">عامل حر</a></li>
            <li><a href="#">صاحب مشروع</a></li>
            <li><a href="#">ضمان حقوق</a></li>
            <li><a href="#">الأسئلة الشائعة</a></li>
            <li><a href="#">تواصل معنا</a></li>
          </ul> -->
        <!--show if user is logged-->
        <ul class="links">
          <div class="flex-group-me mid-screen">
            <img src="imgs/logo.png" class="logo mid-screen" alt="" />
          </div>
          <li>
            <a href="home-page.html" class="flex-dbl-sm link-logged"
              ><img
                src="imgs/profile.png"
                class="active-img d-none"
                alt="img"
              />
              <img
                src="imgs/profile (1).png"
                class="not-active-img"
                alt="img"
              />
              <div>حسابي</div>
            </a>
          </li>
          <li>
            <a href="myProjects.html" class="flex-dbl-sm link-logged"
              ><img
                class="active-img d-none"
                src="imgs/clipboard-text (3).png"
                alt="img"
              />
              <img
                class="not-active-img"
                src="imgs/clipboard-text (2).png"
                alt="img"
              />
              <div>مشاريعي</div>
            </a>
          </li>
          <li>
            <a href="see-projects.html" class="flex-dbl-sm link-logged"
              ><img
                class="active-img d-none"
                src="imgs/discover (1).png"
                alt="img"
              />
              <img class="not-active-img" src="imgs/discover.png" alt="img" />
              <div>تصفح المشاريع</div>
            </a>
          </li>
          <li>
            <a href="wallet.html" class="flex-dbl-sm link-logged"
              ><img
                class="active-img d-none"
                src="imgs/dollar-square (1).png"
                alt="img"
              />
              <img
                class="not-active-img"
                src="imgs/dollar-squarehead.png"
                alt="img"
              />
              <div>الرصيد</div>
            </a>
          </li>
        </ul>

        <div class="flex-sm-gap">
          <!-- <div  class="main-btn light btn-both"
              ><div class="big-screen"><a href="login.html">تسجيل الدخول</a> / <a href="chooseRegister.html">مستخدم جديد</a></div>
              <div class="small-screen">
                <a href="chooseRegister.html"><i class="fa-solid fa-user-plus"></i></a> /
                <a href="login.html"><i class="fa-solid fa-user"></i></a>
              </div>
            </div> -->
          <a href="chat.html" class="logged-ico">
            <img src="imgs/message (1).png" alt="" />
            <div class="dot-num regular">22</div>
          </a>
          <div class="logged-ico noti-btn">
            <img src="imgs/notification-bing.png" alt="" />
            <div class="dot-num regular">3</div>
            <ul class="dropNotification">
              <div class="pad-gray relative-parent mb-2">
                <li class="mb-2">
                  <a href="edit-invoice.html" class="flex-bet-noti activate">
                    <div class="noti-i-cont-bg">
                      <img
                        src="imgs/Frame 271 (1).png"
                        class="active-img d-none"
                        alt="img"
                      />
                      <img
                        src="imgs/Frame 271 (2).png"
                        class="not-active-img d-block"
                        alt="img"
                      />
                    </div>
                    <div class="regular clamped-noti">
                      دعوة للعمل على مشروع “تعديل على الفيديوهات من ناحية القص
                      والتعديل على النصوص داخل الفيديو”
                    </div>
                    <div class="time-noti regular">1 ساعة</div>
                  </a>
                </li>
                <li class="mb-2">
                  <a href="edit-invoice.html" class="flex-bet-noti">
                    <div class="noti-i-cont-bg">
                      <img
                        src="imgs/Frame 271 (1).png"
                        class="active-img d-none"
                        alt="img"
                      />
                      <img
                        src="imgs/Frame 271 (2).png"
                        class="not-active-img d-block"
                        alt="img"
                      />
                    </div>
                    <div class="regular clamped-noti">
                      دعوة للعمل على مشروع “تعديل على الفيديوهات من ناحية القص
                      والتعديل على النصوص داخل الفيديو”
                    </div>
                    <div class="time-noti regular">1 ساعة</div>
                  </a>
                </li>
                <li>
                  <a href="edit-invoice.html" class="flex-bet-noti">
                    <div class="noti-i-cont-bg">
                      <img
                        src="imgs/Frame 271 (1).png"
                        class="active-img d-none"
                        alt="img"
                      />
                      <img
                        src="imgs/Frame 271 (2).png"
                        class="not-active-img d-block"
                        alt="img"
                      />
                    </div>
                    <div class="regular clamped-noti">
                      دعوة للعمل على مشروع “تعديل على الفيديوهات من ناحية القص
                      والتعديل على النصوص داخل الفيديو”
                    </div>
                    <div class="time-noti regular">1 ساعة</div>
                  </a>
                </li>
              </div>
              <a href="notifications.html" class="main-btn up"
                >عرض كل الاشعارات</a
              >
            </ul>
          </div>
          <div class="profile-btn">
            <i class="fa-solid fa-chevron-down"></i>

            <div class="flex-dbl-sm ltr">
              <img src="imgs/Frame 271.png" alt="" />
              <div class="big-screen">
                <div class="font-bold">م. محمد سامي</div>
                <div class="regular font15">CEO at CompanyX</div>
              </div>
            </div>
            <ul class="dropProfile">
              <div class="pad-gray">
                <li>
                  <a href="profile.html" class="flex-in-drop">
                    <div class="noti-i-cont">
                      <img src="imgs/setting-2.png" alt="img" />
                    </div>
                    <div class="regular">الاعدادات</div>
                  </a>
                </li>
                <li>
                  <a href="contact-us.html" class="flex-in-drop">
                    <div class="noti-i-cont">
                      <img src="imgs/24-support.png" alt="img" />
                    </div>
                    <div class="regular">الدعم الفني</div>
                  </a>
                </li>
                <li>
                  <a href="login.html" class="flex-in-drop">
                    <div class="noti-i-cont">
                      <img src="imgs/logout.png" alt="img" />
                    </div>
                    <div class="regular">تسجيل الخروج</div>
                  </a>
                </li>
              </div>
            </ul>
          </div>

          <span class="coll-icon">
            <span></span>
            <span></span>
            <span></span>
          </span>
        </div>
      </div>
    </header>
    <!--end header-->

    <!--start chat section-->
    <div class="chat-main">
      <div class="container">
        <div class="row">
          <div class="col-md-4 p-0 col-12">
            <div class="all-chats">
              <div class="chats-top">
                <div class="filter-top font-bold mb-3">الرسائل</div>
                <div class="main-input-cont">
                  <input
                    type="text"
                    class="main-input pad-right"
                    placeholder="ابحث باستخدام الكلمات المفتاحية"
                  />
                  <button type="button" class="abs-right-in">
                    <i class="fa-solid fa-magnifying-glass"></i>
                  </button>
                </div>
              </div>
              <div class="chats-show">
                <div class="single-chat">
                  <div class="flex-dbl-sm no-align">
                    <img src="imgs/user.jpg" class="chat-user" alt="img" />
                    <div>
                      <div class="font-bold font14">Mr. Ibrahim Yousef</div>
                      <p class="mb-0 gray-6 font12 regular">
                        لقد كانت لدينا مشاكل مع هذه المفاتيح لفترة طويلة الآن،
                        ويبدو أن الأضواء في الممر تتقطع بشكل متقط..
                      </p>
                    </div>
                  </div>
                  <div class="chat-time font12">1 ساعة</div>
                </div>
                <div class="single-chat active">
                  <div class="flex-dbl-sm no-align">
                    <img src="imgs/user.jpg" class="chat-user" alt="img" />
                    <div>
                      <div class="font-bold font14">Mr. Ibrahim Yousef</div>
                      <p class="mb-0 gray-6 font12 regular">
                        لقد كانت لدينا مشاكل مع هذه المفاتيح لفترة طويلة الآن،
                        ويبدو أن الأضواء في الممر تتقطع بشكل متقط..
                      </p>
                    </div>
                  </div>
                  <div class="chat-time font12">1 ساعة</div>
                </div>
                <div class="single-chat">
                  <div class="flex-dbl-sm no-align">
                    <img src="imgs/user.jpg" class="chat-user" alt="img" />
                    <div>
                      <div class="font-bold font14">Mr. Ibrahim Yousef</div>
                      <p class="mb-0 gray-6 font12 regular">
                        لقد كانت لدينا مشاكل مع هذه المفاتيح لفترة طويلة الآن،
                        ويبدو أن الأضواء في الممر تتقطع بشكل متقط..
                      </p>
                    </div>
                  </div>
                  <div class="chat-time font12">1 ساعة</div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-md-8 p-0 col-12">
            <div class="chat-body">
              <div class="chat-messages">
                <div class="flex-group-me mb-3">
                  <div class="chat-date">Yesterday - 09:44 PM</div>
                </div>
                <div class="message-single mb-3 sender">
                  <img src="imgs/user.jpg" class="chat-user" alt="" />
                  <div class="message-contain">
                    <div class="message-text regular mb-1 font12">
                      نص تجريبي .. نص تجريبي .. نص تجريبي .. نص تجريبي .. نص
                      تجريبي .. نص تجريبي .. نص تجريبي .. نص تجريبي ..
                    </div>
                    <div class="font12">16.50 · مقروءة</div>
                  </div>
                </div>
                <div class="message-single mb-3 reciever">
                  <img src="imgs/user.jpg" class="chat-user" alt="" />
                  <div class="message-contain">
                    <div class="message-text regular mb-1 font12">
                      نص تجريبي .. نص تجريبي .. نص تجريبي .. نص تجريبي .. نص
                      تجريبي .. نص تجريبي .. نص تجريبي .. نص تجريبي ..
                    </div>
                    <div class="font12">16.50 · مقروءة</div>
                  </div>
                </div>
              </div>
              <div class="chat-senders">
                <input
                  type="text"
                  class="main-input input-chat-m"
                  placeholder="اكتب رسالتك هنا"
                />
                <label class="mb-0" for="filesNext_input">
                  <input
                    type="file"
                    data-single="true"
                    hidden
                    id="filesNext_input"
                    class="heddenUploud files-input files-upload-chat"
                    name="filesNext[]"
                    data-input="filesNext"
                    value=""
                  />
                  <img src="imgs/form-states.png" alt="" />
                </label>
                <label for="filesNext_input" class="mb-0">
                  <img src="imgs/img.png" alt="" />
                </label>
                <button class="un-styled-btn send-message">
                  <img src="imgs/send.png" alt="" />
                </button>
              </div>
              <div
                class="uploaded__area area-uploaded"
                id="filesNext_cont"
              ></div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!--end chat section-->

    <!--start footer-->
    <div class="footer">
      <div class="down-footer dark">
        <div class="container">
          <div class="down-footer-r font14">
            جميع الحقوق محفوظة لصالح ReWork Platform
          </div>
          <img src="imgs/logo.png" class="logo-fo" alt="logo" />
        </div>
      </div>
    </div>
    <!--end footer-->

    <script src="js/jquery-3.5.1.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/owl.carousel.min.js"></script>
    <script src="js/select2.js"></script>
    <script src="js/jquery.fancybox.min.js"></script>
    <script src="js/main.js"></script>
    <!--chat-->
    <script>
      let chatBtn = document.querySelector(".send-message");
      let chatInput = document.querySelector(".input-chat-m");
      let chatArea = document.querySelector(".chat-messages");
      let filesInput = document.querySelector(".files-upload-chat");
      let areaUploaded = document.querySelector(".area-uploaded");
      // send text
      function sendTextOnly() {
        let inputMessage = chatInput.value;
        let realMessage = `<div class="message-single mb-3 sender">
                      <img src="imgs/user.jpg" class="chat-user" alt="" />
                      <div class="message-contain">
                        <div class="message-text regular mb-1 font12">
                           ${inputMessage}
                        </div>
                        <div class="font12">${new Date().toLocaleTimeString()}</div>
                      </div>
                    </div>`;
        chatArea.insertAdjacentHTML("beforeend", realMessage);
        chatInput.value = "";
        chatArea.scroll(0, 5000);
        chatInput.focus();
      }
      // send files
      function sendFilesOnly(){
        if (inputsFiles.filesNext[0].type.split("/")[0] == "image") {
            let imgSrc = URL.createObjectURL(inputsFiles.filesNext[0]);
            console.log(inputsFiles.filesNext[0]);

            let realMessage = `<div class="message-single mb-3 sender">
                        <img src="imgs/user.jpg" class="chat-user" alt="" />
                        <div class="message-contain">
                          <a data-fancybox="gallery" class="mb-1" href="${imgSrc}">
                            <img src="${imgSrc}" />
                          </a>
                          <div class="font12">${new Date().toLocaleTimeString()}</div>
                        </div>
                      </div>`;
            chatArea.insertAdjacentHTML("beforeend", realMessage);
          } else {
            let imgSrc = URL.createObjectURL(inputsFiles.filesNext[0]);
            let imgName = inputsFiles.filesNext[0].name;

            let realMessage = `<div class="message-single mb-3 sender">
                        <img src="imgs/user.jpg" class="chat-user" alt="" />
                        <div class="message-contain">
                          <a target="_blank" class="mb-1 pdf-style" href="${imgSrc}">
                            <span><i class="far fa-file-pdf mr-1 ml-1"></i></span>

                            ${imgName}
                          </a>
                          <div class="font12">${new Date().toLocaleTimeString()}</div>
                        </div>
                      </div>`;
            chatArea.insertAdjacentHTML("beforeend", realMessage);
          }
          areaUploaded.innerHTML = "";
          filesInput.value = "";
          chatArea.scroll(0, 5000);
          chatInput.focus();
      }

      
      chatBtn.addEventListener("click", function () {
        if (chatInput.value.trim().length > 0 && !filesInput.value.length) {
          sendTextOnly();
        } else if (
          filesInput.value.length &&
          chatInput.value.trim().length < 1
        ) {
          sendFilesOnly()
        } else if (
          filesInput.value.length &&
          chatInput.value.trim().length > 0
        ) {
          sendTextOnly();
          sendFilesOnly()
        }
      });
    </script>
    <!------------abload files------------->
    <script>
      let inputsFiles = {};
      $(".files-input").on("change", function (event) {
        let input = $(this).data("input");
        const selectedFilesCont = document.getElementById(input + "_cont");
        if (!!inputsFiles[input]) {
          let files = new DataTransfer();
          for (let i = 0; i < event.target.files.length; i++) {
            files.items.add(event.target.files[i]);
          }
          for (let i = 0; i < inputsFiles[input].length; i++) {
            files.items.add(inputsFiles[input][i]);
          }
          inputsFiles[input] = files.files;
          selectedFilesCont.innerHTML = "";
        } else {
          inputsFiles[input] = event.target.files;
        }
        if (!!inputsFiles[input] && inputsFiles[input].length > 0) {
          if ($(this).data("single") == true) {
            selectedFilesCont.innerHTML = "";
            inputsFiles[input] = event.target.files;
          }
          for (let i = 0; i < inputsFiles[input].length; i++) {
            const fileType = inputsFiles[input][i].type.split("/")[0];
            if (fileType === "image") {
              let src = URL.createObjectURL(inputsFiles[input][i]);
              $("#" + input + "_cont").append(` <div class="file_">
                                                                            <a data-fancybox="gallery" href="${src}">
                                                                                <img src="${src}" alt="">
                                                                            </a>
                                                                            <div class="remove_media" onclick="deleteFile(this ,'${inputsFiles[input][i].name}' ,'${input}')"><i class="fa-solid fa-xmark font13"></i></div>
                                                                        </div>`);
            } else if (fileType === "video") {
              let src = URL.createObjectURL(inputsFiles[input][i]);

              $("#" + input + "_cont").append(`<div class="file_">
                                                                            <a data-fancybox="gallery" data-type="video" href="${src}">
                                                                                <video controls>
                                                                                    <source src="${src}" type="video/mp4">
                                                                                </video>
                                                                                <div class="play-button"><i class="fas fa-play-circle"></i></div>
                                                                            </a>
                                                                            <div class="remove_media" onclick="deleteFile(this ,'${inputsFiles[input][i].name}' ,'${input}')"><i class="fa-solid fa-xmark font13"></i></div>
                                                                        </div>`);
            } else {
              $("#" + input + "_cont").append(`<div class="file_">
                                                                            <div class="docs_file">
                                                                                <div class="d-flex flex-column align-items-center justify-content-center h-100 p-2">
                                                                                    <span class="font10">${inputsFiles[input][i].name}</span>
                                                                                    <span><i class="far fa-file-pdf mr-1 ml-1"></i></span>
                                                                                </div>
                                                                            </div>
                                                                            <div class="remove_media" onclick="deleteFile(this ,'${inputsFiles[input][i].name}' ,'${input}')"><i class="fa-solid fa-xmark font13"></i></div>
                                                                        </div>`);
            }
          }
        }
        event.target.files = inputsFiles[input];
      });

      function deleteFile(ele, name, input) {
        let filesInput = document.getElementById(input + "_input");
        let files = new DataTransfer();
        let deleted = null;
        for (let i = 0; i < filesInput.files.length; i++) {
          if (filesInput.files[i].name == name && deleted != name) {
            deleted = name;
            continue;
          }
          files.items.add(filesInput.files[i]);
        }
        filesInput.files = files.files;
        inputsFiles[input] = files.files;

        // edit the number of parents to delete
        $(ele).parent().remove();
      }
    </script>
  </body>
</html>
